window.__require=function t(e,o,r){function n(c,s){if(!o[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var p="function"==typeof __require&&__require;if(!s&&p)return p(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+c+"'")}}var a=o[c]={exports:{}};e[c][0].call(a.exports,function(t){return n(e[c][1][t]||t)},a,a.exports,t,e,o,r)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<r.length;c++)n(r[c]);return n}({BlackHolePropertyUnit:[function(t,e,o){"use strict";cc._RF.push(e,"9b7bfM//UVPR6d/d3gfHrde","BlackHolePropertyUnit"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PropertyUnit"),n=cc._decorator,i=n.ccclass,c=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.other=null,e}return __extends(e,t),__decorate([c(cc.Node)],e.prototype,"other",void 0),e=__decorate([i],e)}(r.default);o.default=s,cc._RF.pop()},{"./PropertyUnit":"PropertyUnit"}],CustomEvents:[function(t,e,o){"use strict";cc._RF.push(e,"f785e9VmltDKL3sZfWSooDt","CustomEvents"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=(r.property,function(){function t(){}return t.REACH_GOAL="REACH_GOAL",t=__decorate([n],t)}());o.default=i,cc._RF.pop()},{}],Direction:[function(t,e,o){"use strict";cc._RF.push(e,"0a35bFlqV9LxZ6rv9iZVHE4","Direction"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator;r.ccclass,r.property;(function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.RIGHT=2]="RIGHT",t[t.LEFT=3]="LEFT"})(o.Direction||(o.Direction={})),cc._RF.pop()},{}],Dispatcher:[function(t,e,o){"use strict";cc._RF.push(e,"cffc9APKuZPTr2jX5QNDpKD","Dispatcher"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){}return t.addListener=function(t,e){void 0===this.events[t]&&(this.events[t]={listeners:[]}),this.events[t].listeners.push(e)},t.removeListener=function(t,e){if(void 0===this.events[t])return!1;this.events[t].listeners=this.events[t].listeners.filter(function(t){return t.toString()!==e.toString()})},t.dispatch=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(void 0===this.events[t])return!1;this.events[t].listeners.forEach(function(t){t(e)})},t.events={},t}();o.Dispatcher=r,cc._RF.pop()},{}],EnableCollider:[function(t,e,o){"use strict";cc._RF.push(e,"b17f1CFMCZK45S6gZe06U9J","EnableCollider"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],EntitiesCollector:[function(t,e,o){"use strict";cc._RF.push(e,"b8b18Q/37pOpqFjrqbWg2JK","EntitiesCollector"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PropertyUnit"),n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allPropertyUnits=[],e}return __extends(e,t),e.prototype.start=function(){this.allPropertyUnits=this.node.getComponentsInChildren(r.default)},e.prototype.getPropertyAtUnit=function(t){return this.allPropertyUnits.find(function(e){return!(!e||e.gridUnit!==t)})},e=__decorate([i],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./PropertyUnit":"PropertyUnit"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"b2afbSUIOtOUqOOSAwJxvJI","GameManager"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PlayerController"),n=t("./Dispatcher"),i=t("./CustomEvents"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e.reachGoal=0,e.winPopUp=null,e.losePopUp=null,e}return __extends(e,t),e.prototype.start=function(){var t=this;n.Dispatcher.addListener(i.default.REACH_GOAL,function(){console.log("YO WHAT SUP"),t.reachGoal++,1==t.reachGoal&&t.scheduleOnce(function(){2==t.reachGoal?t.winPopUp.active=!0:t.losePopUp.active=!0},.01)})},__decorate([l([r.default])],e.prototype,"players",void 0),__decorate([l(cc.Node)],e.prototype,"winPopUp",void 0),__decorate([l(cc.Node)],e.prototype,"losePopUp",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./CustomEvents":"CustomEvents","./Dispatcher":"Dispatcher","./PlayerController":"PlayerController"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"2f3a3Pt/CZJAK879jREH2F8","Global"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=(r.property,function(){function t(){}return t.currentLevel=1,t.maxLevel=7,t=__decorate([n],t)}());o.default=i,cc._RF.pop()},{}],GridController:[function(t,e,o){"use strict";cc._RF.push(e,"2a8dbUDCBBEio4f4XQC5qzu","GridController"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Properties"),n=t("./Unit"),i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridSize=new cc.Vec2,e.properties=[],e.unit=[],e.unitSize=new cc.Vec2,e}return __extends(e,t),e.prototype.onLoad=function(){this.callculateIndex()},e.prototype.start=function(){},e.prototype.callculateIndex=function(){var t=this.node.childrenCount;this.unitSize=new cc.Vec2(this.node.children[0].width,this.node.children[0].height);var e=this.node.children[0].width,o=this.node.getComponent(cc.Layout),r=Math.floor((this.node.width-(o.paddingLeft+o.paddingRight))/(e+o.spacingX)),i=t/r;this.gridSize=new cc.Vec2(r,i),console.log("Grid size : "+this.gridSize);for(var c=0;c<r;c++){this.unit[c]=[];for(var s=0;s<i;s++)this.unit[c][s]=this.node.children[c+s*r].getComponent(n.default),this.unit[c][s].posInGrid=new cc.Vec2(c,s)}},e.prototype.isValidInGrid=function(t){return!(!this.unit[t.x]||!this.unit[t.x][t.y]||this.unit[t.x][t.y].property==r.Properties.WALL)},e.prototype.gridToPosition=function(t){try{return this.isValidInGrid(t)?this.unit[t.x][t.y].node.position:null}catch(t){return null}},e.prototype.getProperty=function(t){try{return this.isValidInGrid(t)?this.unit[t.x][t.y].property:null}catch(t){return null}},e=__decorate([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./Properties":"Properties","./Unit":"Unit"}],Input:[function(t,e,o){"use strict";cc._RF.push(e,"4874bgB17pC1ZLDNvTdaC39","Input"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PlayerController"),n=t("./Direction"),i=cc._decorator,c=i.ccclass,s=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerControllers=[],e.swipeMinLength=30,e.touchStartPos=new cc.Vec2,e}return __extends(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.touchStart=function(t){this.touchStartPos=t.getLocation()},e.prototype.touchEnd=function(t){if(this.touchStartPos){var e=this.touchStartPos,o=t.getLocation();this.touchStartPos=null,t.stopPropagation();var r=o.x-e.x,i=o.y-e.y,c=Math.sqrt(r*r+i*i),s=Math.abs(i)>Math.abs(r);if(!(c<this.swipeMinLength)){var l=n.Direction.UP;s&&i>0?l=n.Direction.UP:s?l=n.Direction.DOWN:!s&&r>0?l=n.Direction.RIGHT:!s&&r<0&&(l=n.Direction.LEFT),this.playerControllers.forEach(function(t){t.move(l)})}}},__decorate([s([r.default])],e.prototype,"playerControllers",void 0),__decorate([s(cc.Float)],e.prototype,"swipeMinLength",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Direction":"Direction","./PlayerController":"PlayerController"}],LosePopUp:[function(t,e,o){"use strict";cc._RF.push(e,"93ec29wzYJAN6qX048AiNHf","LosePopUp"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Global"),n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.replay=function(){r.default.currentLevel<r.default.maxLevel&&cc.director.loadScene("Level"+r.default.currentLevel)},e=__decorate([i],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../Global":"Global"}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"b5ea2+ygfdNJ5s0xBsaG+6j","MainMenu"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Global"),n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.playButtonClick=function(){cc.director.loadScene("Level"+r.default.currentLevel)},e=__decorate([i],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./Global":"Global"}],PlayerController:[function(t,e,o){"use strict";cc._RF.push(e,"8ec80bPXypJOIVzakNL1Dmu","PlayerController"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Unit"),n=t("./Direction"),i=t("./GridController"),c=t("./Properties"),s=t("./EntitiesCollector"),l=t("./BlackHolePropertyUnit"),p=t("./Dispatcher"),a=t("./CustomEvents"),u=cc._decorator,d=u.ccclass,_=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPosInGrid=new cc.Vec2,e.gridController=null,e.duration=.15,e.isGetToGoal=!1,e.entitiesCollector=null,e}return __extends(e,t),e.prototype.onCollisionEnter=function(t,e){var o=t.node;this.node.position=o.position,this.getComponent(cc.BoxCollider).enabled=!1,this.currentPosInGrid=o.getComponent(r.default).posInGrid},e.prototype.start=function(){this.entitiesCollector=this.node.parent.getComponent(s.default)},e.prototype.move=function(t){this.isGetToGoal||this.isMoving?console.log("YO, can not move cause you reach the goal"):this.performMove(t,this.duration)},e.prototype.performMove=function(t,e){var o,r=this,i=new cc.Vec2,s=!1,l=null;switch(t){case n.Direction.UP:i=new cc.Vec2(0,1),this.gridController.getProperty(this.currentPosInGrid)!=c.Properties.GOAL_UP?o=this.gridController.gridToPosition(this.currentPosInGrid.add(i)):(o=this.node.position.add(new cc.Vec2(0,this.gridController.unitSize.y)),s=!0);break;case n.Direction.DOWN:i=new cc.Vec2(0,-1),o=this.gridController.gridToPosition(this.currentPosInGrid.add(i));break;case n.Direction.LEFT:i=new cc.Vec2(-1,0),o=this.gridController.gridToPosition(this.currentPosInGrid.add(i));break;case n.Direction.RIGHT:i=new cc.Vec2(1,0),o=this.gridController.gridToPosition(this.currentPosInGrid.add(i))}if(o){if(s)l=function(){r.currentPosInGrid=r.currentPosInGrid.add(i),r.isGetToGoal=!0,p.Dispatcher.dispatch(a.default.REACH_GOAL)};else try{l=function(){switch(r.currentPosInGrid=r.currentPosInGrid.add(i),r.gridController.getProperty(r.currentPosInGrid)){case c.Properties.WATER:r.performMove(t,.25*r.duration);break;case c.Properties.BLACK_HOLE:r.moveToNextBlackHole(r.gridController.unit[r.currentPosInGrid.x][r.currentPosInGrid.y]);break;default:r.isMoving=!1}}}catch(t){console.log("Error with this.currentPosInGrid "+this.currentPosInGrid),console.log("Error with this.currentPosInGrid "+i)}this.moveTo(o,e,l)}},e.prototype.moveTo=function(t,e,o){var r=new cc.Tween;r.target(this.node),r.to(e,{position:t},null).call(o),r.start(),this.isMoving=!0},e.prototype.moveCallback=function(){},e.prototype.moveToNextBlackHole=function(t){var e=this,o=this.entitiesCollector.getPropertyAtUnit(t);if(!o)throw new Error("Can not move to next black hole");var r=o.other,n=new cc.Tween;n.target(this.node),n.to(.5*this.duration,{scale:0},null),n.to(0,{position:r.position}),n.to(.5*this.duration,{scale:1},null).call(function(){e.currentPosInGrid=r.getComponent(l.default).gridUnit.posInGrid,e.isMoving=!1}),n.start()},__decorate([_(i.default)],e.prototype,"gridController",void 0),e=__decorate([d],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./BlackHolePropertyUnit":"BlackHolePropertyUnit","./CustomEvents":"CustomEvents","./Direction":"Direction","./Dispatcher":"Dispatcher","./EntitiesCollector":"EntitiesCollector","./GridController":"GridController","./Properties":"Properties","./Unit":"Unit"}],Properties:[function(t,e,o){"use strict";cc._RF.push(e,"4f5cbbK+vVEJLlsxzEeb4IJ","Properties"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator;r.ccclass,r.property;(function(t){t[t.NORMAL=0]="NORMAL",t[t.PORTAL=1]="PORTAL",t[t.WALL=2]="WALL",t[t.WATER=3]="WATER",t[t.BLACK_HOLE=4]="BLACK_HOLE",t[t.PUSH=5]="PUSH",t[t.MAGNET=6]="MAGNET",t[t.JUMPING_LEFT=7]="JUMPING_LEFT",t[t.JUMPING_RIGHT=8]="JUMPING_RIGHT",t[t.JUMPING_UP=9]="JUMPING_UP",t[t.JUMPING_DOWN=10]="JUMPING_DOWN",t[t.GOAL_UP=11]="GOAL_UP",t[t.GOAL_DOWN=12]="GOAL_DOWN",t[t.GOAL_RIGHT=13]="GOAL_RIGHT",t[t.GOAL_LEFT=14]="GOAL_LEFT"})(o.Properties||(o.Properties={})),cc._RF.pop()},{}],PropertyUnit:[function(t,e,o){"use strict";cc._RF.push(e,"78639dV2PVAaZTPgmG/mx61","PropertyUnit"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Properties"),n=t("./Unit"),i=cc._decorator,c=i.ccclass,s=i.property,l=i.requireComponent,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.property=r.Properties.NORMAL,e.gridUnit=null,e}return __extends(e,t),e.prototype.onCollisionEnter=function(t,e){var o=t.node;this.gridUnit=o.getComponent(n.default),o.getComponent(n.default).property=this.property,this.getComponent(cc.BoxCollider).enabled=!1,this.property!=r.Properties.GOAL_UP&&(this.node.position=o.position)},__decorate([s({type:cc.Enum(r.Properties)})],e.prototype,"property",void 0),e=__decorate([c,l(cc.BoxCollider)],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Properties":"Properties","./Unit":"Unit"}],Rotating:[function(t,e,o){"use strict";cc._RF.push(e,"c1d54G6nAFCrKy9U3/LrUiM","Rotating"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},e.prototype.update=function(t){this.node.rotationY+=180*t/2},__decorate([i(cc.Label)],e.prototype,"label",void 0),__decorate([i],e.prototype,"text",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Unit:[function(t,e,o){"use strict";cc._RF.push(e,"9ea0dSvR0NGq6QNBBaA8Bmt","Unit"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Properties"),n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.posInGrid=new cc.Vec2,e.property=r.Properties.NORMAL,e}return __extends(e,t),e=__decorate([i],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./Properties":"Properties"}],WaterTiming:[function(t,e,o){"use strict";cc._RF.push(e,"97443jHR/5DU6P+vBoofGPL","WaterTiming"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=0,e}return __extends(e,t),e.prototype.update=function(t){this.time+=t,this.node.getComponent(cc.Sprite).getMaterial(0).setProperty("time",10*this.time)},e=__decorate([n],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],WinPopUp:[function(t,e,o){"use strict";cc._RF.push(e,"d529bC2N7BJ0Z0J+WqJitbI","WinPopUp"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Global"),n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.nextLevel=function(){r.default.currentLevel<r.default.maxLevel&&(r.default.currentLevel=parseInt(cc.director.getScene().name.replace("Level","")),r.default.currentLevel++,cc.director.loadScene("Level"+r.default.currentLevel))},e=__decorate([i],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../Global":"Global"}],index:[function(t,e,o){"use strict";cc._RF.push(e,"78ab1dIeR9Ox6MhC621opQr","index"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},__decorate([i(cc.Label)],e.prototype,"label",void 0),__decorate([i],e.prototype,"text",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["WaterTiming","BlackHolePropertyUnit","CustomEvents","Direction","Dispatcher","EnableCollider","EntitiesCollector","GameManager","Global","GridController","Input","MainMenu","PlayerController","LosePopUp","WinPopUp","Properties","PropertyUnit","Rotating","Unit","index"]);